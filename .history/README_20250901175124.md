# JIRA Story Point Calculator

A Chrome extension that automatically calculates story points based on time tracking and complexity values in JIRA issues.

## Features

- Automatically detects time tracking and complexity fields
- Calculates story points using the formula: `Story Points = Time Tracking Ã— Complexity`
- Updates the story point field in real-time when values change
- **Persistent floating panel** that stays visible on JIRA pages
- **Enhanced field detection** with multiple event listeners
- Supports various time formats (e.g., "2h 30m", "45m", "1.5h")
- Works with complexity values: 0.1, 0.2, 0.3, 0.6, 1.0, 1.5, 2.0
- **Keyboard shortcuts** for quick access
- **Real-time field monitoring** with improved mutation observer

## Installation

1. Clone or download this repository
2. Open Chrome and go to `chrome://extensions/`
3. Enable "Developer mode" in the top right
4. Click "Load unpacked" and select the extension folder
5. The extension icon should appear in your toolbar

## Usage

1. Navigate to a JIRA issue page
2. The extension will automatically detect and calculate story points
3. When you change time tracking or complexity values, story points will update automatically
4. Use the extension popup to manually recalculate if needed

## Debugging

If the extension isn't working as expected, follow these steps:

### 1. Check Console Logs
Open the browser console (F12) and look for messages starting with "JIRA Story Point Calculator:"

### 2. Manual Calculation
In the console, run:
```javascript
triggerStoryPointCalculation()
```

### 3. Check Field Detection
The extension logs which fields it finds. Look for:
- "Found time tracking field: [selector]"
- "Found complexity field: [selector]"
- "Updated story point field with value: [number]"

### 4. Common Issues

**Story points not updating automatically:**
- Check if the mutation observer is detecting field changes
- Verify that the time tracking and complexity fields are being found
- Ensure the story point field selector matches your JIRA instance

**Fields not being detected:**
- The extension uses multiple selectors to find fields
- Check the console for "Could not find [field] field" messages
- Use the debug method to see all available fields

### 5. Field Selectors

The extension looks for fields using these patterns:

**Time Tracking:**
- `[data-testid*="time-tracking"]`
- `[data-testid*="time"]`
- `.time-tracking`
- `input[name*="time"]`

**Complexity:**
- `[data-testid*="complexity"]`
- `[data-testid*="Complexity"]`
- `.complexity-field`
- `input[name*="complexity"]`

**Story Points:**
- `[data-testid="issue-field-number.ui.issue-field-story-point-estimate--container"]`
- `[data-testid*="story-point"]`
- `[data-testid*="storypoint"]`

### 6. Testing

Use the `test.html` file to test the extension locally:
1. Open `test.html` in your browser
2. Load the extension
3. Change time tracking and complexity values
4. Check if story points update automatically

## Customization

To customize field detection for your specific JIRA instance:

1. Open the browser console on a JIRA page
2. Run: `jiraStoryPointCalculator.debugAvailableFields()`
3. Look for the field selectors in the console output
4. Update the selectors in `content.js` if needed

## Troubleshooting

**Extension not loading:**
- Check if the manifest.json is valid
- Ensure all files are in the correct directory structure
- Check Chrome extension errors in `chrome://extensions/`

**Permission errors:**
- Verify the extension has access to JIRA domains
- Check if the content script is running on the page

**Calculation errors:**
- Verify time format is supported
- Check if complexity value is in the allowed range
- Look for JavaScript errors in the console

## Support

If you continue to have issues:

1. Check the console for error messages
2. Verify your JIRA instance uses standard field names
3. Test with the provided test.html file
4. Check if JIRA has custom field configurations

## Development

The extension consists of:
- `content.js` - Main logic for field detection and calculation
- `popup.js` - Extension popup interface
- `manifest.json` - Extension configuration
- `test.html` - Local testing file
